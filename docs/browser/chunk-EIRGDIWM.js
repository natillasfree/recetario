import{a as We,c as ie,g as Le,i as xe,l as oe,n as je,o as se,r as Ue,s as ae,t as G,u as f,v as ce,w as ue,x as y}from"./chunk-6PY2TZSN.js";import{d as Fe}from"./chunk-QOOLA7SK.js";import{$ as P,Bb as re,H as Se,La as $e,M as ee,O as b,P as te,R as De,U as $,Vb as Me,X as p,Z as d,_ as Oe,c as O,ea as B,f as Re,h as be,i as ye,k as T,l as R,m as Q,n as L,pa as K,r as V,sa as E,tb as Ne,ub as ne,y as Ce,z as _e,za as x}from"./chunk-UIUK56GT.js";import{f as A}from"./chunk-2F6QYXKT.js";var lt="firebase",dt="10.14.1";f(lt,dt,"app");var M=new Ne("ANGULARFIRE2_VERSION");function He(e,n,t){if(n){if(n.length===1)return n[0];let o=n.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(e).getImmediate({optional:!0})}var de=(e,n)=>{let t=n?[n]:G(),r=[];return t.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},_=class{constructor(){return de(pt)}},pt="app-check";function N(){}var q=class{zone;delegate;constructor(n,t=ye){this.zone=n,this.delegate=t}now(){return this.delegate.now()}schedule(n,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{n.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},le=class{zone;task=null;constructor(n){this.zone=n}call(n,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",N,{},N,N)),t.pipe(De({next:r,complete:r,error:r})).subscribe(n).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},F=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new q(Zone.current)),this.insideAngular=t.run(()=>new q(Zone.current,be)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||e)(d(E))};static \u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Z(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function ht(e){return Z().ngZone.runOutsideAngular(()=>e())}function C(e){return Z().ngZone.run(()=>e())}function pe(e){return ft(Z())(e)}function ft(e){return function(t){return t=t.lift(new le(e.ngZone)),t.pipe(R(e.outsideAngular),T(e.insideAngular))}}var gt=(e,n)=>function(){let r=arguments;return n&&setTimeout(()=>{n.state==="scheduled"&&n.invoke()},10),C(()=>e.apply(void 0,r))},X=(e,n)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(n&&(t||=C(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",N,{},N,N))),r[o]=gt(r[o],t));let i=ht(()=>e.apply(this,r));if(!n)if(i instanceof O){let o=Z();return i.pipe(R(o.outsideAngular),T(o.insideAngular))}else return C(()=>i);return i instanceof O?i.pipe(pe):i instanceof Promise?C(()=>new Promise((o,s)=>i.then(c=>C(()=>o(c)),c=>C(()=>s(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:C(()=>i)};var S=class{constructor(n){return n}},j=class{constructor(){return G()}};function At(e){return e&&e.length===1?e[0]:new S(ae())}var he=new p("angularfire2._apps"),kt={provide:S,useFactory:At,deps:[[new P,he]]},Et={provide:j,deps:[[new P,he]]};function It(e){return(n,t)=>{let r=t.get(x);f("angularfire",M.full,"core"),f("angularfire",M.full,"app"),f("angular",ne.full,r.toString());let i=n.runOutsideAngular(()=>e(t));return new S(i)}}function _r(e,...n){return B([kt,Et,{provide:he,useFactory:It(e),multi:!0,deps:[E,K,F,...n]}])}var Sr=X(Ue,!0);var Ve="auth",U=class{constructor(n){return n}},fe=class{constructor(){return de(Ve)}};var ge=new p("angularfire2.auth-instances");function Tn(e,n){let t=He(Ve,e,n);return t&&new U(t)}function Pn(e){return(n,t)=>{let r=n.runOutsideAngular(()=>e(t));return new U(r)}}var vn={provide:fe,deps:[[new P,ge]]},wn={provide:U,useFactory:Tn,deps:[[new P,ge],S]};function Pi(e,...n){return f("angularfire",M.full,"auth"),B([wn,vn,{provide:ge,useFactory:Pn(e),multi:!0,deps:[E,K,F,j,[new P,_],...n]}])}var vi=X(ue,!0);var Rn=new Map,bn={activated:!1,tokenObservers:[]},yn={initialized:!1,enabled:!1};function g(e){return Rn.get(e)||Object.assign({},bn)}function Ze(){return yn}var Cn="https://content-firebaseappcheck.googleapis.com/v1";var _n="exchangeDebugToken",Be={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Fi=24*60*60*1e3;var Ae=class{constructor(n,t,r,i,o){if(this.operation=n,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(n){return A(this,null,function*(){this.stop();try{this.pending=new ie,this.pending.promise.catch(t=>{}),yield Sn(this.getNextRun(n)),this.pending.resolve(),yield this.pending.promise,this.pending=new ie,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(n){if(n)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Sn(e){return new Promise(n=>{setTimeout(n,e)})}var Dn={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},v=new xe("appCheck","AppCheck",Dn);function Xe(e){if(!g(e).activated)throw v.create("use-before-activation",{appName:e.name})}function Ye(r,i){return A(this,arguments,function*({url:e,body:n},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let c={method:"POST",body:JSON.stringify(n),headers:o},a;try{a=yield fetch(e,c)}catch(h){throw v.create("fetch-network-error",{originalErrorMessage:h?.message})}if(a.status!==200)throw v.create("fetch-status-error",{httpStatus:a.status});let l;try{l=yield a.json()}catch(h){throw v.create("fetch-parse-error",{originalErrorMessage:h?.message})}let m=l.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw v.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let D=Number(m[1])*1e3,H=Date.now();return{token:l.token,expireTimeMillis:H+D,issuedAtTimeMillis:H}})}function Je(e,n){let{projectId:t,appId:r,apiKey:i}=e.options;return{url:`${Cn}/projects/${t}/apps/${r}:${_n}?key=${i}`,body:{debug_token:n}}}var On="firebase-app-check-database",$n=1,ke="firebase-app-check-store";var Y=null;function Nn(){return Y||(Y=new Promise((e,n)=>{try{let t=indexedDB.open(On,$n);t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{var i;n(v.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ke,{keyPath:"compositeKey"})}}}catch(t){n(v.create("storage-open",{originalErrorMessage:t?.message}))}}),Y)}function Mn(e,n){return Fn(Wn(e),n)}function Fn(e,n){return A(this,null,function*(){let r=(yield Nn()).transaction(ke,"readwrite"),o=r.objectStore(ke).put({compositeKey:e,value:n});return new Promise((s,c)=>{o.onsuccess=a=>{s()},r.onerror=a=>{var l;c(v.create("storage-set",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})})}function Wn(e){return`${e.options.appId}-${e.name}`}var Ee=new je("@firebase/app-check");function me(e,n){return Le()?Mn(e,n).catch(t=>{Ee.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Qe(){return Ze().enabled}function et(){return A(this,null,function*(){let e=Ze();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Ln={error:"UNKNOWN_ERROR"};function xn(e){return We.encodeString(JSON.stringify(e),!1)}function Ie(e,n=!1){return A(this,null,function*(){let t=e.app;Xe(t);let r=g(t),i=r.token,o;if(i&&!z(i)&&(r.token=void 0,i=void 0),!i){let a=yield r.cachedTokenPromise;a&&(z(a)?i=a:yield me(t,void 0))}if(!n&&i&&z(i))return{token:i.token};let s=!1;if(Qe()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ye(Je(t,yield et()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let a=yield r.exchangeTokenPromise;return yield me(t,a),r.token=a,{token:a.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield g(t).exchangeTokenPromise}catch(a){a.code==="appCheck/throttled"?Ee.warn(a.message):Ee.error(a),o=a}let c;return i?o?z(i)?c={token:i.token,internalError:o}:c=Ge(o):(c={token:i.token},r.token=i,yield me(t,i)):c=Ge(o),s&&Hn(t,c),c})}function jn(e){return A(this,null,function*(){let n=e.app;Xe(n);let{provider:t}=g(n);if(Qe()){let r=yield et(),{token:i}=yield Ye(Je(n,r),e.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Un(e,n,t,r){let{app:i}=e,o=g(i),s={next:t,error:r,type:n};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&z(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),Ke(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Ke(e))}function tt(e,n){let t=g(e),r=t.tokenObservers.filter(i=>i.next!==n);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Ke(e){let{app:n}=e,t=g(n),r=t.tokenRefresher;r||(r=zn(e),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zn(e){let{app:n}=e;return new Ae(()=>A(this,null,function*(){let t=g(n),r;if(t.token?r=yield Ie(e,!0):r=yield Ie(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=g(n);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Be.RETRIAL_MIN_WAIT,Be.RETRIAL_MAX_WAIT)}function Hn(e,n){let t=g(e).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&n.error!=null?r.error(n.error):r.next(n)}catch{}}function z(e){return e.expireTimeMillis-Date.now()>0}function Ge(e){return{token:xn(Ln),error:e}}var Te=class{constructor(n,t){this.app=n,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:n}=g(this.app);for(let t of n)tt(this.app,t.next);return Promise.resolve()}};function Vn(e,n){return new Te(e,n)}function Bn(e){return{getToken:n=>Ie(e,n),getLimitedUseToken:()=>jn(e),addTokenListener:n=>Un(e,"INTERNAL",n),removeTokenListener:n=>tt(e.app,n)}}var Kn="@firebase/app-check",Gn="0.8.8";var qn="app-check",qe="app-check-internal";function Zn(){se(new oe(qn,e=>{let n=e.getProvider("app").getImmediate(),t=e.getProvider("heartbeat");return Vn(n,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,t)=>{e.getProvider(qe).initialize()})),se(new oe(qe,e=>{let n=e.getProvider("app-check").getImmediate();return Bn(n)},"PUBLIC").setInstantiationMode("EXPLICIT")),f(Kn,Gn)}Zn();var Xn=["localhost","0.0.0.0","127.0.0.1"],qi=typeof window<"u"&&Xn.includes(window.location.hostname);var Jn="firebase",Qn="10.14.1";y.registerVersion(Jn,Qn,"app-compat");var er=["ngOnDestroy"],rt=(e,n,t,r={})=>new Proxy(e,{get:(i,o)=>t.runOutsideAngular(()=>{if(e[o])return r?.spy?.get&&r.spy.get(o,e[o]),e[o];if(er.indexOf(o)>-1)return()=>{};let s=n.toPromise().then(c=>{let a=c?.[o];return typeof a=="function"?a.bind(c):a?.then?a.then(l=>t.run(()=>l)):t.run(()=>a)});return new Proxy(()=>{},{get:(c,a)=>s[a],apply:(c,a,l)=>s.then(m=>{let D=m?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,D),D})})})});var Pe=class{constructor(n){return n}},it=new p("angularfire2.app.options"),ot=new p("angularfire2.app.name");function st(e,n,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=y.apps.filter(c=>c&&c.name===i.name)[0]||n.runOutsideAngular(()=>y.initializeApp(e,i));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let c=!!module.hot;tr("error",`${s.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Pe(s)}var tr=(e,...n)=>{re()&&typeof console<"u"&&console[e](...n)};function at(e,n,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===e)||[];if(o)return nr(i,s)||(nt("error",`${n} was already initialized on the ${t} Firebase App with different settings.${rr?" You may need to reload as Firebase is not HMR aware.":""}`),nt("warn",{is:i,was:s})),o;{let c=r();return globalThis.\u0275AngularfireInstanceCache.push([e,c,i]),c}}function nr(e,n){try{return e.toString()===n.toString()}catch{return e===n}}var rr=typeof module<"u"&&!!module.hot,nt=(e,...n)=>{re()&&typeof console<"u"&&console[e](...n)};globalThis.\u0275AngularfireInstanceCache||=[];var ir=new p("angularfire2.auth.use-emulator"),or=new p("angularfire2.auth.settings"),sr=new p("angularfire2.auth.tenant-id"),ar=new p("angularfire2.auth.langugage-code"),cr=new p("angularfire2.auth.use-device-language"),ur=new p("angularfire.auth.persistence"),lr=(e,n,t,r,i,o,s,c)=>at(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let a=n.runOutsideAngular(()=>e.auth());if(t&&a.useEmulator(...t),r&&(a.tenantId=r),a.languageCode=i,o&&a.useDeviceLanguage(),s)for(let[l,m]of Object.entries(s))a.settings[l]=m;return c&&a.setPersistence(c),a},[t,r,i,o,s,c]),ct=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,c,a,l,m,D,H,h){let ve=new Re,W=L(void 0).pipe(T(s.outsideAngular),b(()=>o.runOutsideAngular(()=>import("./chunk-KW3LNYHX.js"))),V(()=>st(t,o,r)),V(I=>lr(I,o,c,l,m,D,a,H)),ee({bufferSize:1,refCount:!1}));if(Me(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=L(null);else{W.pipe(Se()).subscribe();let I=W.pipe(b(u=>u.getRedirectResult().then(k=>k,()=>null)),pe,ee({bufferSize:1,refCount:!1})),we=W.pipe(b(u=>new O(k=>({unsubscribe:o.runOutsideAngular(()=>u.onAuthStateChanged(w=>k.next(w),w=>k.error(w),()=>k.complete()))})))),J=W.pipe(b(u=>new O(k=>({unsubscribe:o.runOutsideAngular(()=>u.onIdTokenChanged(w=>k.next(w),w=>k.error(w),()=>k.complete()))}))));this.authState=I.pipe(te(we),R(s.outsideAngular),T(s.insideAngular)),this.user=I.pipe(te(J),R(s.outsideAngular),T(s.insideAngular)),this.idToken=this.user.pipe(b(u=>u?Q(u.getIdToken()):L(null))),this.idTokenResult=this.user.pipe(b(u=>u?Q(u.getIdTokenResult()):L(null))),this.credential=Ce(I,ve,this.authState.pipe(_e(u=>!u))).pipe(V(u=>u?.user?u:null),R(s.outsideAngular),T(s.insideAngular))}return rt(this,W,o,{spy:{apply:(I,we,J)=>{(I.startsWith("signIn")||I.startsWith("createUser"))&&J.then(u=>ve.next(u))}}})}static \u0275fac=function(r){return new(r||e)(d(it),d(ot,8),d(x),d(E),d(F),d(ir,8),d(or,8),d(sr,8),d(ar,8),d(cr,8),d(ur,8),d(_,8))};static \u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var ut=class e{constructor(n){this.auth=n;this.auth.authState.subscribe(t=>{t?(this.userData=t,this.$isLoggedIn.set(!0)):(this.userData=null,this.$isLoggedIn.set(!1),this.router.navigate(["login"]))})}router=Oe(Fe);userData=null;$isLoggedIn=$e(!1);login(){return A(this,null,function*(){try{return yield this.auth.signInWithPopup(new ce)}catch(n){return n}})}logout(){this.auth.signOut()}static \u0275fac=function(t){return new(t||e)(d(ct))};static \u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"})};export{M as a,He as b,de as c,_ as d,F as e,pe as f,X as g,S as h,j as i,_r as j,Sr as k,fe as l,Pi as m,vi as n,it as o,ot as p,st as q,at as r,ir as s,or as t,sr as u,ar as v,cr as w,ur as x,lr as y,ct as z,ut as A};
