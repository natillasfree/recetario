import{a as Q}from"./chunk-LZYZU7XZ.js";import"./chunk-VUG7N5NL.js";import{a as X,b as C,c as Y,d as Z,f as h,h as ee,i as te,j as ie,k as ne,l as oe,m as re,n as ae,o as le,p as se,q as de,r as ce}from"./chunk-4ML7GJUY.js";import{a as I}from"./chunk-LV24V4F4.js";import"./chunk-CHYS4EZ7.js";import"./chunk-EIRGDIWM.js";import"./chunk-6PY2TZSN.js";import{d as J}from"./chunk-QOOLA7SK.js";import{$a as p,Ba as N,Da as B,Ea as G,Ga as d,La as j,Qa as x,Qb as K,Sa as b,Ua as u,Va as H,Wa as R,Xa as k,Ya as S,Za as o,_ as w,_a as n,ab as F,ba as T,bb as g,cb as c,db as D,hb as l,ib as E,ja as _,jb as z,ka as f,la as L,ma as A,pb as V,qb as U,ra as q,rb as W}from"./chunk-UIUK56GT.js";import{a as y,b as M,c as O,f as P}from"./chunk-2F6QYXKT.js";function ge(i,t){i&1&&(o(0,"p",12),l(1,"Este campo es requerido y debe tener al menos 3 caracteres."),n())}function _e(i,t){if(i&1){let e=F();o(0,"button",29),g("click",function(){_(e);let a=c().$index,s=c(2);return f(s.removeIngredient(a))}),L(),o(1,"svg",30),p(2,"path",31),n()()}}function fe(i,t){if(i&1&&(o(0,"div",15)(1,"div",25)(2,"label",17),l(3),n(),p(4,"input",26),n(),o(5,"div",25)(6,"label",17),l(7,"Medida"),n(),p(8,"input",27),n(),x(9,_e,3,0,"button",28),n()),i&2){let e=t.$index;b("formGroupName",e),d(3),z("Ingrediente ",e+1,""),d(6),u(e>0?9:-1)}}function xe(i,t){i&1&&(o(0,"p",12),l(1,"Este campo es requerido."),n())}function Ce(i,t){i&1&&(o(0,"p",12),l(1,"Este campo es requerido."),n())}function be(i,t){if(i&1&&(o(0,"option",22),l(1),n()),i&2){let e=t.$implicit;b("value",e),d(),E(e)}}function he(i,t){i&1&&(o(0,"p",12),l(1,"Por favor, selecciona una categor\xEDa."),n())}function ve(i,t){i&1&&(o(0,"p",12),l(1,"Por favor, introduce una URL v\xE1lida para la imagen."),n())}function ye(i,t){if(i&1){let e=F();o(0,"div",0),p(1,"div",1),o(2,"div",2)(3,"button",3),g("click",function(){_(e);let a=c();return f(a.closeModal())}),L(),o(4,"svg",4),p(5,"path",5),n()(),A(),o(6,"div",6)(7,"h2",7),l(8,"Crear Nueva Receta"),n(),o(9,"form",8),g("ngSubmit",function(){_(e);let a=c();return f(a.createRecipe())}),o(10,"div",9)(11,"label",10),l(12,"Nombre de la Receta"),n(),p(13,"input",11),x(14,ge,2,0,"p",12),n(),o(15,"div",13)(16,"h3",14),l(17,"Ingredientes"),n(),k(18,fe,10,3,"div",15,H),o(20,"button",16),g("click",function(){_(e);let a=c();return f(a.addIngredient())}),l(21," Agregar Ingrediente "),n()(),o(22,"div",9)(23,"label",17),l(24,"Instrucciones"),n(),p(25,"textarea",18),x(26,xe,2,0,"p",12),n(),o(27,"div",9)(28,"label",17),l(29,"Pa\xEDs/\xC1rea de origen"),n(),p(30,"input",19),x(31,Ce,2,0,"p",12),n(),o(32,"div",9)(33,"label",17),l(34,"Categor\xEDa"),n(),o(35,"select",20)(36,"option",21),l(37,"Selecciona una categor\xEDa"),n(),k(38,be,2,2,"option",22,R),n(),x(40,he,2,0,"p",12),n(),o(41,"div",9)(42,"label",17),l(43,"URL de la imagen"),n(),p(44,"input",23),x(45,ve,2,0,"p",12),n(),o(46,"button",24),l(47," Crear Receta "),n()()()()()}if(i&2){let e,r,a,s,v,m=c();d(9),b("formGroup",m.recipeForm),d(5),u((e=m.recipeForm.get("strMeal"))!=null&&e.invalid&&((e=m.recipeForm.get("strMeal"))!=null&&e.touched)?14:-1),d(4),S(m.ingredientControls),d(8),u((r=m.recipeForm.get("strInstructions"))!=null&&r.invalid&&((r=m.recipeForm.get("strInstructions"))!=null&&r.touched)?26:-1),d(5),u((a=m.recipeForm.get("strArea"))!=null&&a.invalid&&((a=m.recipeForm.get("strArea"))!=null&&a.touched)?31:-1),d(7),S(m.categories),d(2),u((s=m.recipeForm.get("strCategory"))!=null&&s.invalid&&((s=m.recipeForm.get("strCategory"))!=null&&s.touched)?40:-1),d(5),u((v=m.recipeForm.get("strMealThumb"))!=null&&v.invalid&&((v=m.recipeForm.get("strMealThumb"))!=null&&v.touched)?45:-1),d(),b("disabled",m.recipeForm.invalid)}}var $=class i{isOpen=!1;onClose=new q;fb=w(se);recipeForm;fire=w(I);categories=["Beef","Chicken","Dessert","Lamb","Pasta","Pork","Seafood","Side","Starter","Vegetarian"];constructor(){this.recipeForm=this.fb.group({strMeal:new h("",[C.required,C.minLength(3)]),strInstructions:new h("",[C.required]),strMealThumb:new h("",[C.required]),strCategory:new h("",[C.required]),strArea:new h("",[C.required]),ingredients:this.fb.array([this.fb.group({ingredient:new h("",[C.required]),measure:new h("",[C.required])})])})}addIngredient(){let t=this.recipeForm.get("ingredients");t.length<20&&t.push(this.fb.group({ingredient:new h("",[C.required]),measure:new h("",[C.required])}))}removeIngredient(t){let e=this.recipeForm.get("ingredients");e.length>1&&e.removeAt(t)}get ingredientControls(){return this.recipeForm.get("ingredients").controls}closeModal(){this.onClose.emit()}onPopState(t){this.onClose.emit("Me cierro")}handleKeyboardEvent(t){t.key==="Escape"&&this.closeModal()}createRecipe(){return P(this,null,function*(){if(!this.recipeForm.invalid)try{let t=this.recipeForm.value,e=y(y({},t),t.ingredients.reduce((a,s,v)=>(a[`strIngredient${v+1}`]=s.ingredient,a[`strMeasure${v+1}`]=s.measure,a),{}));delete e.ingredients;let r=yield this.fire.createRecipe(e);this.recipeForm.reset(),this.closeModal()}catch(t){alert("Error al crear la receta: "+t)}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-form-modal"]],hostBindings:function(e,r){e&1&&g("popstate",function(s){return r.onPopState(s)},!1,B)("keydown",function(s){return r.handleKeyboardEvent(s)},!1,G)},inputs:{isOpen:"isOpen"},outputs:{onClose:"onClose"},standalone:!0,features:[V],decls:1,vars:1,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-pink-200"],[1,"fixed","inset-0","bg-pink-200"],[1,"bg-pink-100","rounded-lg","shadow-2xl","p-8","z-20","w-full","max-w-4xl","mx-auto","relative","max-h-full","overflow-y-auto"],[1,"absolute","top-4","right-4","text-gray-600","hover:text-red-500","transition","duration-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"max-w-full","mx-auto"],[1,"text-3xl","font-bold","text-gray-700","mb-6","text-4xl","font-light"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"block","text-md","font-semibold","text-gray-800","text-lg","font-light"],["type","text","formControlName","strMeal",1,"mt-2","block","w-full","rounded-lg","border","border-gray-400","shadow","focus:border-green-500","focus:ring","focus:ring-green-300"],[1,"text-red-600","text-sm","mt-1"],["formArrayName","ingredients",1,"space-y-6"],[1,"text-xl","font-semibold","text-gray-700","text-2xl","font-light"],[1,"flex","gap-6","items-start",3,"formGroupName"],["type","button",1,"mt-4","py-3","px-5","border","border-transparent","rounded-lg","shadow","text-sm","font-semibold","text-white","bg-green-600","hover:bg-green-700","transition","duration-300","bg-pink-600","hover:bg-pink-700",3,"click"],[1,"block","text-md","font-semibold","text-gray-800"],["formControlName","strInstructions","rows","4",1,"mt-2","block","w-full","rounded-lg","border","border-gray-400","shadow","focus:border-green-500","focus:ring","focus:ring-green-300"],["type","text","formControlName","strArea",1,"mt-2","block","w-full","rounded-lg","border","border-gray-400","shadow","focus:border-green-500","focus:ring","focus:ring-green-300"],["formControlName","strCategory",1,"mt-2","block","w-full","rounded-lg","border","border-gray-400","shadow","focus:border-green-500","focus:ring","focus:ring-green-300"],["value",""],[3,"value"],["type","url","formControlName","strMealThumb","placeholder","https://ejemplo.com/imagen.jpg",1,"mt-2","block","w-full","rounded-lg","border","border-gray-400","shadow","focus:border-green-500","focus:ring","focus:ring-green-300"],["type","submit",1,"w-full","py-3","px-5","border","border-transparent","rounded-lg","shadow","text-lg","font-semibold","text-white","bg-blue-600","hover:bg-blue-700","transition","duration-300","focus:outline-none","focus:ring-4","focus:ring-blue-300","disabled:bg-gray-400","disabled:cursor-not-allowed","bg-pink-600","hover:bg-pink-700","text-xl","font-light",3,"disabled"],[1,"flex-1"],["type","text","formControlName","ingredient",1,"mt-2","block","w-full","rounded-lg","border","border-gray-400","shadow","focus:border-green-500","focus:ring","focus:ring-green-300"],["type","text","formControlName","measure",1,"mt-2","block","w-full","rounded-lg","border","border-gray-400","shadow","focus:border-green-500","focus:ring","focus:ring-green-300"],["type","button",1,"mt-8","p-2","text-red-600","hover:text-red-800","transition","duration-300"],["type","button",1,"mt-8","p-2","text-red-600","hover:text-red-800","transition","duration-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(e,r){e&1&&x(0,ye,48,7,"div",0),e&2&&u(r.isOpen?0:-1)},dependencies:[de,ee,ae,le,X,re,Y,Z,ce,te,oe,ie,ne]})};var we=(i,t)=>t.idMeal,Fe=()=>[1,2,3,4,5,6,7,8,9,10],Me=i=>({"opacity-100":i});function ke(i,t){i&1&&(o(0,"li",4),p(1,"div",5),o(2,"div"),p(3,"div",6)(4,"div",7),n()())}function Se(i,t){i&1&&(o(0,"div",0)(1,"h1",2),l(2,"Lista de Recetas"),n(),o(3,"ul",3),k(4,ke,5,0,"li",4,R),n()()),i&2&&(d(4),S(U(0,Fe)))}function Ee(i,t){if(i&1&&(o(0,"p",1),l(1),n()),i&2){let e=c();d(),E(e.$state().error)}}function Te(i,t){if(i&1){let e=F();o(0,"div",11),g("click",function(){_(e);let a=c().$implicit,s=c(2);return f(s.goToRecipe(a.idMeal))}),p(1,"img",12),o(2,"div")(3,"h2",13),l(4),n()()()}if(i&2){let e=c().$implicit;d(),D("alt",e.strMeal),b("src",e.strMealThumb,N),d(3),E(e.strMeal)}}function Re(i,t){if(i&1){let e=F();o(0,"div",11),g("click",function(){_(e);let a=c().$implicit,s=c(2);return f(s.goToRecipe(a.idMeal))}),p(1,"img",12),o(2,"div")(3,"h2",13),l(4),n()()(),o(5,"button",14),g("click",function(){_(e);let a=c().$implicit,s=c(2);return f(s.editRecipe(a.idMeal))}),l(6," \u270F\uFE0F "),n(),o(7,"button",15),g("click",function(){_(e);let a=c().$implicit,s=c(2);return f(s.removeFromFavorites(a.idMeal))}),l(8," \u{1F5D1}\uFE0F "),n()}if(i&2){let e=c().$implicit;d(),D("alt",e.strMeal),b("src",e.strMealThumb,N),d(3),E(e.strMeal)}}function Ve(i,t){if(i&1&&(o(0,"li",9),x(1,Te,5,3,"div",10)(2,Re,9,3),n()),i&2){let e=c(2);d(),u(e.type=="category"||e.type=="nationality"?1:-1),d(),u(e.type==null?2:-1)}}function Ie(i,t){if(i&1){let e=F();o(0,"div",16)(1,"button",17),g("click",function(){_(e);let a=c(2);return f(a.openModal())}),o(2,"span",18),l(3,"+"),n()()(),o(4,"app-form-modal",19),g("onClose",function(a){_(e);let s=c(2);return f(s.closeModal(a))}),n()}if(i&2){let e=c(2);d(4),b("isOpen",e.isModalOpen)}}function $e(i,t){if(i&1&&(o(0,"div",8)(1,"h1",2),l(2,"Lista de Recetas"),n(),o(3,"ul",3),k(4,Ve,3,2,"li",9,we),n()(),x(6,Ie,5,1)),i&2){let e=c();b("ngClass",W(2,Me,!e.$state().loading)),d(4),S(e.$state().data),d(2),u(e.type==null?6:-1)}}var me=class i{api=w(Q);router=w(J);fire=w(I);type="";subtype="";isModalOpen=!1;$state=j({loading:!1,error:!1,data:[]});ngOnInit(){this.fetchData()}fetchData(){this.$state.update(e=>M(y({},e),{loading:!0}));let t;switch(console.log("Fetching data"),this.type){case"category":t=this.api.getRecipesByCategory(this.subtype);break;case"nationality":t=this.api.getRecipesByNationality(this.subtype);break;case void 0:t=this.fire.getRecipesWithID();break;default:t=null}t?t.subscribe({next:e=>{e.reduce((r,a)=>{let m=a,{id:s}=m,v=O(m,["id"]);return r[s]=v,r},{}),this.$state.update(r=>M(y({},r),{loading:!1,error:!1,data:e}))},error:e=>{this.$state.update(r=>M(y({},r),{loading:!1,error:e,data:[]}))}}):this.$state.update(e=>M(y({},e),{loading:!1,error:"Categor\xEDa incorrecta"}))}goToRecipe(t){this.type===void 0?this.router.navigate([`/recipe/favorites/${t}`]):this.router.navigate([`recipe/${t}`])}openModal(){this.isModalOpen=!0,history.pushState({},document.title)}closeModal(t){t&&console.log("Desde el componente que abre el modal"+t),this.isModalOpen=!1}removeFromFavorites(t){t&&this.fire.deleteRecipeById(t).then(()=>{console.log(`Receta con ID ${t} eliminada`),this.$state.update(e=>M(y({},e),{data:e.data.filter(r=>r.idMeal!==t)}))}).catch(e=>{console.error("Error al eliminar la receta:",e)})}editRecipe(t){this.router.navigate([`/favorites/edit/${t}`])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-list-recipes"]],inputs:{type:"type",subtype:"subtype"},standalone:!0,features:[V],decls:3,vars:1,consts:[[1,"container","mx-auto","p-4"],[2,"color","red"],[1,"text-2xl","font-bold","mb-4"],[1,"space-y-4"],[1,"flex","items-center","p-4","border","rounded-lg","shadow","animate-pulse"],[1,"h-16","w-16","bg-gray-300","rounded-md","mr-4"],[1,"h-4","bg-gray-300","rounded","w-3/4","mb-2"],[1,"h-3","bg-gray-300","rounded","w-1/2"],[1,"container","mx-auto","space-y-4","opacity-0","transition-opacity","duration-2000",3,"ngClass"],[1,"flex","items-center","p-4","border","rounded-lg","shadow","hover:bg-gray-100","transition","cursor-pointer"],[1,"flex","items-center"],[1,"flex","items-center",3,"click"],[1,"h-16","w-16","rounded-md","mr-4",3,"src","alt"],[1,"text-lg","font-semibold"],[1,"edit-button","text-blue-500","hover:text-blue-700","transition","mr-2",3,"click"],[1,"trash-button","text-red-500","hover:text-red-700","transition",3,"click"],[1,"fixed","bottom-5","left-1/2","transform-translate-x-1/2"],[1,"flex","items-center","justify-center","w-16","h-16","bg-blue-500","text-white","rounded-full","shadow-lg","hover:bg-blue-600","transition","duration-200",3,"click"],[1,"text-4xl","leading-none"],[3,"onClose","isOpen"]],template:function(e,r){e&1&&x(0,Se,6,1,"div",0)(1,Ee,2,1,"p",1)(2,$e,7,4),e&2&&u(r.$state().loading?0:r.$state().error?1:2)},dependencies:[K,$],styles:["@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}.animate-pulse[_ngcontent-%COMP%]{background:linear-gradient(to right,#d1d5db,#9ca3af,#d1d5db);background-size:2000px 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.trash-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:red;font-size:1.5rem;margin-left:10px}.trash-button[_ngcontent-%COMP%]:hover{color:#8b0000}.edit-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.25rem;margin-right:.5rem}.edit-button[_ngcontent-%COMP%]:hover{color:#3b82f6}li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{flex:1;display:flex;align-items:center}"]})};export{me as ListRecipesComponent};
